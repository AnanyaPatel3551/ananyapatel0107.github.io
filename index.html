<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Welcome âœ¨</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    font-family: "Poppins", sans-serif;
    height: 100vh;
    overflow: hidden;
    background: #f4e5d3;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  body.night {
    background: #1b1320;
  }

  .scene {
    position: relative;
    width: min(1100px, 96vw);
    height: min(700px, 90vh);
    border-radius: 28px;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0,0,0,0.35);
    background: #000;
  }

  .bg-layer {
    position: absolute;
    inset: 0;
    background-position: center;
    background-size: contain;   /* FULL IMAGE, NO CROP */
    background-repeat: no-repeat;
    opacity: 1;
    transition: opacity 1.5s ease;
  }

  .bg-typing { background-image: url("room-typing.jpg"); }
  .bg-smile { background-image: url("room-typing.jpg"); opacity: 0; }

  .scene.smile-on .bg-smile { opacity: 1; }
  .scene.smile-on .bg-typing { opacity: 0; }

  /* RIGHT PANEL CLEAN DESIGN */
  .right-panel {
    position: absolute;
    top: 0;
    right: 0;
    width: 32%;  /* SMALLER */
    height: 100%;
    padding: 34px 32px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    background: linear-gradient(
      to left,
      rgba(255,255,255,0.85),
      rgba(255,255,255,0.4),
      transparent
    );

    color: #3d2a1f;
  }

  body.night .right-panel {
    background: linear-gradient(
      to left,
      rgba(18,10,28,0.92),
      rgba(18,10,28,0.6),
      transparent
    );
    color: #f9efff;
  }

  .tagline {
    font-size: 0.85rem;
    opacity: 0.75;
    letter-spacing: 0.08em;
  }

  #welcomeText {
    margin: 14px 0 8px;
    font-size: 2rem;
    font-weight: 700;
    white-space: nowrap;
    overflow: hidden;
    border-right: 2px solid rgba(120,80,140,0.8);
    animation: caretBlink 1s infinite;
  }

  @keyframes caretBlink {
    0%,100% { border-color: transparent; }
    50% { border-color: rgba(120,80,140,0.95); }
  }

  #thankYou {
    font-size: 1rem;
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 1s ease, transform 1s ease;
    margin-bottom: 16px;
  }

  #thankYou.show {
    opacity: 1;
    transform: translateY(0);
  }

  .counter-row {
    margin-top: 18px;
    font-size: 1rem;
  }

  #visitorCount {
    font-size: 1.9rem;
    font-weight: 700;
    margin-left: 6px;
    color: #7544b2;
  }

  .controls {
    display: flex;
    gap: 12px;
    margin-top: 20px;
  }

  .btn {
    border: none;
    border-radius: 999px;
    padding: 10px 16px;
    font-size: 0.82rem;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    background: rgba(140,100,190,0.12);
    color: #3d2a1f;
    transition: all 0.2s ease;
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 14px rgba(60,30,90,0.3);
  }

  body.night .btn {
    background: rgba(210,190,255,0.1);
    color: #f9efff;
  }
</style>
</head>

<body>

<div class="scene" id="scene">

  <div class="bg-layer bg-typing"></div>
  <div class="bg-layer bg-smile"></div>

  <div class="right-panel">
    <div>
      <div class="tagline">A cozy little coding corner</div>

      <h2 id="welcomeText"></h2>

      <p id="thankYou">Thanks for stopping by â€” your visit just made this cozy corner brighter â˜•ðŸ’›</p>

      <div class="counter-row">
        Youâ€™re visitor number <span id="visitorCount">0</span>
      </div>
    </div>

    <div>
      <div class="controls">
        <button class="btn" id="themeToggle">ðŸŒ™ Night mode</button>
        <button class="btn" id="musicToggle">ðŸŽ§ Lofi: off</button>
      </div>

      <div style="font-size: 0.75rem; opacity: 0.7; margin-top: 10px;">
        Linked from your GitHub Â· Made with coffee & curiosity â˜•
      </div>
    </div>
  </div>
</div>

<audio id="lofiAudio" loop src="lofi-study.mp3"></audio>

<script>
  const scene = document.getElementById("scene");
  const welcomeEl = document.getElementById("welcomeText");
  const thankYouEl = document.getElementById("thankYou");
  const visitorEl = document.getElementById("visitorCount");

  setTimeout(() => scene.classList.add("smile-on"), 1200);

  // typing effect
  const text = "Welcome! âœ¨";
  let i = 0;
  function typing() {
    if (i <= text.length) {
      welcomeEl.textContent = text.slice(0, i);
      i++;
      setTimeout(typing, 90);
    } else {
      thankYouEl.classList.add("show");
    }
  }
  setTimeout(typing, 600);

  // working visitor API
  fetch("https://api.counterapi.dev/v1/ananya/cozy/visits")
    .then(r => r.json())
    .then(d => visitorEl.textContent = d.count)
    .catch(() => visitorEl.textContent = "âœ¨");

  // night mode
  document.getElementById("themeToggle").onclick = () => {
    document.body.classList.toggle("night");
  };

  // music
  const audio = document.getElementById("lofiAudio");
  let musicOn = false;
  document.getElementById("musicToggle").onclick = async () => {
    musicOn = !musicOn;
    if (musicOn) {
      await audio.play();
      musicToggle.textContent = "ðŸŽ¶ Lofi: on";
    } else {
      audio.pause();
      musicToggle.textContent = "ðŸŽ§ Lofi: off";
    }
  };
</script>

</body>
</html>
